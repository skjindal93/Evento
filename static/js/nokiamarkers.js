(function(){(function(a){function c(b){for(var b=b.split("."),h=this,d=b[0]==="window"?1:0;d<b.length;d++)h=h[b[d]]||(h[b[d]]={});return h}var f=c(a);if(!(f.load&&typeof f.load==="function")){var o=function(){return!0},e={},k={},q=function(){for(var b in k)k.hasOwnProperty(b)&&k[b]&&!k[b].cancelled&&k[b].load()},l=function(b,h){for(var d=e[b],i=d?d.length:0;i--;)if(d[i].name===h)return d[i];throw"InvalidArgument: Feature implementation [$1] does not exist in the registry.".replace("$1",b+":"+h);},g=function(b,
h){var d;if(!h||h==="auto")a:{for(var i=(d=e[b])?d.length:0,m=0;m<i;m++)if(d[m].readyState==="complete"||d[m].readyState==="loading"){d=d[m];break a}for(m=0;m<i;m++)if(d[m].detector()){d=d[m];break a}d=null}else d=h==="none"?null:l(b,h);return d},s=function(b){var b=b||o,h={},d,i,m;for(i in e)if(e.hasOwnProperty(i)){d=[];for(m=0;m<e[i].length;m++)b(e[i][m])&&d.push(e[i][m].name);d.length>0&&(h[i]=d)}return h},n,t=0,p=function(b,h,d,i,m,a,e){this.featureName=b;this.name=h;this.loadPath=d;this.detector=
i||o;this.dependencies=m;this.overrides=a;this.charset=e||"UTF-8";this.readyState="uninitialized"};p.prototype={onWrite:function(b){this.readyState="loading";b&&q()},onLoad:function(b){b&&this.onWrite(b);this.readyState="complete";q()},canLoad:function(b,h){for(var d=this.dependencies,i=d?d.length:0,a;i--;){if(b[d[i]]==="none")throw"InvalidState: Feature [$1] requires [$2] but it has been explicitly set to 'none'. Aborting loader.".replace("$1",this.featureName).replace("$2",d[i]);a=g(d[i],b[d[i]]||
"auto");if(!a)throw"InvalidArgument: Feature implementation [$1] does not exist in the registry.".replace("$1",d[i]);if(a.readyState==="uninitialized"||!h&&a.readyState==="loading")return!1}return!0},writeSync:function(b){this.readyState="loading";b.write('<script type="text/javascript" charset="$ENC$" src="$SRC$"><\/script>'.replace("$SRC$",this.loadPath).replace("$ENC$",this.charset));this.onLoad(!0)},writeAsync:function(b,h,d){this.readyState="loading";var a=this,e=b.createElement("script");h&&
(e.async=!1);e.type="text/javascript";e.charset=this.charset;e.onload=e.onreadystatechange=function(){var d=e.readyState;if(!d||/^(?:loaded|complete)$/i.test(d))e.onload=e.onreadystatechange=null,a.onLoadCallback&&a.onLoadCallback(b),a.onLoad(h)};e.onerror=function(b){d(b)};e.src=this.loadPath;b.getElementsByTagName("head")[0].appendChild(e);this.onWrite(h)}};p.prototype.featureName=null;p.prototype.onLoadCallback=p.prototype.onLoadCallback;p.prototype.readyState=null;var r=function(b){this.matrix=
b};r.prototype={resolve:function(b,h){var d={},a,c=this.matrix,f=b.length,g,k,j;if(h)for(a in h)d[a]=h[a];for(;f--;)for(g=(a=c[b[f]])?a.length:0;g--;)j=a[g]&&a[g].split("="),k=j[0],e[k]&&this.addToMap(j[0],j.length===2?j[1]:null,d);return d},addToMap:function(b,a,d){!a&&!d[b]?d[b]="auto":!d[b]||d[b]=="auto"?d[b]=a:this.doesOverride(b,a,d[b])&&(d[b]=a)},doesOverride:function(b,a,d){if(!a)return!1;var e=(b=l(b,a).overrides)&&b.length;if(!b)throw"InvalidState: Cannot resolve package conflict between [$1] and [$2]. There is no override specification.".replace("$1",
a).replace("$2",d);for(;e--;)if(b[e]===d)return!0;return!1}};var j=function(b,a,d,e,c){e=e||document;this.requested=b;this.onSuccess=a||o;this.onError=d||function(b){throw b;};this.doc=e;c===void 0?(this.inHead=e.readyState!=="complete",this.writeSync=n==null?n=e.createElement("script").async:n):this.inHead=this.writeSync=c;this.id=t++;k[this.id]=this};j.prototype={onFinished:function(b){delete k[this.id];if(b)this.onError(b);else this.onSuccess()},load:function(){var b=this.requested,a,d,c=!0,j=
this;try{for(d in b)e[d]&&(a=g(d,b[d]))&&this.loadSingle(a,b,this.inHead,this.writeSync,function(b){j.onFinished(b)})&&(c=!1);c&&this.onDone()}catch(f){this.onFinished(f),this.onFinished=o}},onDone:function(){if(!this.done){var b=this;this.inHead||window.setTimeout(function(){b.onFinished()},1);this.done=!0}},loadSingle:function(b,a,d,e,c){if(b.readyState==="complete")return!1;else if(b.readyState==="loading")return!0;var j,f;if(b.canLoad(a,e))d?b.writeSync(this.doc,this.id,c):b.writeAsync(this.doc,
e,c);else{b=b.dependencies;for(j=b.length;j--;)f=g(b[j],a[b[j]]||"auto"),this.loadSingle(f,a,d,e,c)}return!0}};j.prototype.onFinished=j.prototype.onFinished;j.prototype.id=null;j.prototype.doc=null;f.loaders=k;f.features=e;f._detectors={};f.get=g;f.add=function(b,a,d,c,j,f,g){if(!b||!a||!d)throw"InvalidArgument: A feature implementation must have at least a feature name, name and a loadPath.";(e[b]||(e[b]=[])).push(new p(b,a,d,c,j,f,g))};f.isLoaded=function(b,a){return l(b,a).readyState==="complete"};
f.load=function(b,a,d,e,c){(new j(b,a,d,e,c)).load()};f.getFeatureMap=function(){return s(function(b){return b.featureName!="base"})};f.getLoadedMap=function(){return s(function(b){return b.featureName!="base"&&b.readyState==="complete"})};f.setFeatureMatrix=function(b){f.featureMatrix=new r(b)};f.getFeaturesFromMatrix=function(b,a){return f.featureMatrix.resolve(b,a)};c("nokia.maps").Features=f}})("nokia.Features");
(function(){var a=[0.1];a.pop();a.push("");if(a[0]!==""){var c=function(a,c){var e=a[c];a[c]=function(){this.length||(this[0]="")||(this.length=0);return e.apply(this,arguments)}},a=Array.prototype;c(a,"push");c(a,"splice")}})();
(function(a,c){var f=a.split(".")[0],o={};c[f]||(c[f]={});c[f].Settings={addObserver:function(a,c,f){(o[a]?o[a]:o[a]=[]).push({callback:c,context:f})},removeObserver:function(a,c,f){var a=o[a],l,g=0;if(a)for(l=a.length;g<l;)a[g]===c&&a[g+1]===f&&a.splice(g,2),g+=2},set:function(a,c){var f=o[a],l,g;l=this[a];this[a]=this[a+"Setter"]?this[a+"Setter"](c):c;if(f&&l!==c)for(l=f.length;g=f[--l];)g.callback.call(g.context||null,c)},defaultLanguageSetter:function(a){return a=="auto"?"en-US":a},defaultLanguage:"",
appId:"",authenticationToken:""}})("nokia.maps",this);nokia.maps.Features._detectors["clustering-clustering"]=function(){return!0};nokia.maps.Features._detectors["heatmap-heatmap"]=function(){return!0};nokia.maps.Features._detectors["ui-ovi_web"]=function(){return!0};
nokia.maps.Features._detectors["ui-nokia_generic"]=function(){var a=navigator.userAgent.toLowerCase(),c=function(){var a=document.createElement("canvas");if(!a||!a.getContext)return!1;return typeof a.getContext("2d").fillText==="function"}(),f=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),o=a.match(/msie/)&&!window.opera&&!c,a=a.match(/msie\s7/);return c||f||o&&!a};nokia.maps.Features._detectors["routing-nokiaenteprise"]=function(){return!0};
nokia.maps.Features._detectors["positioning-w3c"]=function(){var a=!1;try{a=!(!navigator||!(navigator.geolocation&&typeof navigator.geolocation.getCurrentPosition==="function"))}catch(c){}return a};nokia.maps.Features._detectors["behavior-touch"]=function(){return!0};nokia.maps.Features._detectors["behavior-all"]=function(){return!0};nokia.maps.Features._detectors["map-js-p2d-dom"]=function(){return!0};
nokia.maps.Features._detectors["map-js-p2d-canvas"]=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))};nokia.maps.Features._detectors["gfx-vml"]=function(){return!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")};nokia.maps.Features._detectors["gfx-svg"]=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")};
nokia.maps.Features._detectors["gfx-canvas"]=function(){var a=document.createElement("canvas");if(!a||!a.getContext)return!1;return typeof a.getContext("2d").fillText==="function"};nokia.maps.Features._detectors["kml-kml"]=function(){return!0};this.nokia.maps=this.nokia.maps||{};this.nokia.maps.build="nokiamapsapi-2.2.4-Cupid-20130415-w15-ree273c7558aaaa645466feeb1dc6cc98548e8127";
(function(a){var c=a.config||{};c.packages=c.packages||{routing:[{name:"nokiaenterprise"}],positioning:[{name:"w3c"}],map:[{name:"js-p2d-canvas",dependencies:["gfx"]},{name:"js-p2d-dom",dependencies:["gfx"]}],behavior:[{name:"all"},{name:"touch"}],gfx:[{name:"canvas"},{name:"svg"},{name:"vml"}],ui:[{name:"nokia_generic",dependencies:["gfx","map","language"]},{name:"ovi_web",dependencies:["map","language"]}],language:[{name:"en-US"},{name:"en-GB"},{name:"de-DE"},{name:"es-ES"},{name:"zh-CN"},{name:"fr-FR"},
{name:"ru-RU"},{name:"it-IT"}],kml:[{name:"kml"}],heatmap:[{name:"heatmap",dependencies:["map"]}],clustering:[{name:"clustering",dependencies:["map"]}]};c.excludePackaging={advsearch:1,advertising:1,advrouting:1,search:1};c.externalPackages=c.externalPackages||{places:[{name:"dataonly",url:c.places?c.places.devPath:null,fileName:"jsPlacesDataAPI.js",detector:function(){return!nokia.places},overrides:[]},{name:"withui",url:c.places?c.places.devPath:null,fileName:"jsPlacesAPI.js",detector:function(){return!(nokia.places&&
nokia.places.ui)},overrides:["dataonly"]}]};c.featureMatrix=c.featureMatrix||{maps:["gfx","behavior","map","positioning","ui","places"],positions:["gfx","behavior","map","positioning","ui","places"],places:["places=withui"],placesdata:["places=dataonly"],directions:["gfx","behavior","map","positioning","routing","ui","places"],datarendering:["gfx","behavior","map","ui","places","kml","heatmap","clustering"],all:["gfx","behavior","map","ui","positioning","routing","places=withui","advertising","kml",
"heatmap","clustering"]};c.advertisement=c.advertisement||{endpoint:"http://onboard.lcpapi.lpaweb.net/nmg/",properties:{os:"js",device:"desktop",pub:"grouptest",app:"nokiamaps",output:"json"}};c.routing=c.routing||{baseUrl:"http://route.nlp.nokia.com/routing/7.2/",protocol:"nokia.maps.routing.navteq.protocolV72"};c.assetsPath=c.assetsPath||"assets/ovi/mapsapi";c.adbarCss=c.adbarCss||"adbar.css";c.tileProviders=c.tileProviders||"nokia.maps.map.js.nlpTileProviders";c.copyright=c.copyright||"nokia.maps.map._Copyright";
c["language.warnOnMissingTranslation"]=c["language.warnOnMissingTranslation"]||!1;c.includePlaces=!0;a.config=c})(this.nokia.maps);nokia.maps.config=this.nokia.maps.config;
(function(a){function c(a){t=a.dependencies||[];t.push("base");s=l+"-"+a.name;p.add(l,a.name,e+s+".js",p._detectors[s],t,a.overrides)}function f(a){for(var b=/([\\?&]([^=]+)=([^&#]+))/g,c,d={};c=b.exec(a);)d[c[2]]=c[3];return d}function o(){if(q["jsl.js"])return q["jsl.js"];for(var a="jsl.js".replace(".","\\."),b=document.getElementsByTagName("script"),c=b.length,a=RegExp("^(.*\\/"+a+".*|"+a+".*)");c--;)if(a.test(b[c].src))return q["jsl.js"]=b[c].src,q["jsl.js"];throw"InternalError: could not locate jsl.js in the environment.";
}var e,k,q={};if(!a.developmentMode&&!a.assetsPath)throw"Internal Error: no asset path has been specified";e=a.loadPath||function(a){a=a.split("/").slice(0,-1);return a.join("/")+(a.length>0?"/":"")}(o());k=a.params||f(o());var l,g,s,n,t,p=nokia.maps.Features,r=this;for(l in a.packages){g=a.packages[l];for(n=0;n<g.length;n++)c(g[n])}if(a.externalPackages)for(l in a.externalPackages){g=a.externalPackages[l];for(n=0;n<g.length;n++)p.add(l,g[n].name,(a.developmentMode&&g[n].url?g[n].url:e)+g[n].fileName,
g[n].detector,g[n].dependencies,g[n].overrides)}p.add("base","noovi",e+"base_noovi.js",function(){return r.ovi&&r.ovi.win});p.add("base","withovi",e+"base.js",function(){return!r.ovi||!r.ovi.win});a.params=k;a.baseUrl=e;a.featureMatrix?(p.setFeatureMatrix(a.featureMatrix),a=k["with"]?k["with"].split(","):["maps"],delete k["with"],a=p.getFeaturesFromMatrix(a,k)):a=k;k.blank||p.load(a,null,function(a){throw a;})})(this.nokia.maps.config);})();
